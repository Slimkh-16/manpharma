<link rel="stylesheet" type="text/css" href="{{ store_url }}catalog/view/theme/default/stylesheet/ezdefi.css">
<script src="{{ store_url }}catalog/view/javascript/bignumber.min.js"></script>
<script src="{{ store_url }}catalog/view/javascript/ezdefi.js"></script>

<div class="payment-form-wrapper">
	<input type="hidden" id="origin-value" value="{{ origin_value }}">
	<input type="hidden" id="url-check-order-complete" value="{{ url_check_order_complete }}">
	<input type="hidden" id="order-id" value="{{ order_id }}">
	<input type="checkbox" class="hidden" id="enable_simple_pay_input" {{ enable_simple_pay ? 'checked' : '' }}>
	<input type="checkbox" class="hidden" id="enable_escrow_pay_input" {{ enable_escrow_pay ? 'checked' : '' }}>
	<input type="hidden" id="url-create-payment--simple" value="{{ url_create_simple_payment }}">
	<input type="hidden" id="url-create-payment--escrow" value="{{ url_create_escrow_payment }}">

	<div class="ezdefi-select-coin-box">
		<div class="ezdefi-select-coin__list">
			{% for coin_config in coins_config %}
				<label for="select-coin-{{ coin_config.ezdefi_coin_id }}" class="ezdefi-change-coin-item">
                    {% if coin_config.description %}
                        <img src="{{ coin_config.logo }}" alt="" class="ezdefi-select-coin-item__logo" data-toggle="tooltip" title="{{ coin_config.description }}">
                    {% else %}
                        <img src="{{ coin_config.logo }}" alt="" class="ezdefi-select-coin-item__logo">
                    {% endif %}

                    <span class="ezdefi-select-coin-item__price"> {{ coin_config.price }} </span>
                    <span class="ezdefi-select-coin-item__symbol">{{coin_config.symbol}}</span>
                    <span class="ezdefi-select-coin-item__discount">-{{coin_config.discount + 0}}%</span>
                    <input type="radio" name="coin-selected-to-order" class="hidden select-coin-checkbox" id="select-coin-{{ coin_config.ezdefi_coin_id }}" value="{{ coin_config.ezdefi_coin_id }}" data-discount="{{ coin_config.discount }}">
                </label>
			{% endfor %}
		</div>
		<a href="{{ link_guide }}" class="ezapy-guide-link" target="_blank">{{ text_guide }}</a>
        {% if enable_simple_pay %}
		    <button class="ezdefi-btn-create-payment btn btn-primary btn-block" data-url_create_payment="{{ url_create_simple_payment }}" disabled> {{ button_next }} </button>
        {% else %}
            <button class="ezdefi-btn-create-payment btn btn-primary btn-block" data-url_create_payment="{{ url_create_escrow_payment }}" disabled> {{ button_next }} </button>
        {% endif %}
    </div>
	<div class="ezdefi-payment-box">
		<div class="ezdefi-payment__header">
            <input type="hidden" id="selected-coin-id">
            <input type="hidden" id="selected-coin-discount">
			<img src="https://s2.coinmarketcap.com/static/img/coins/64x64/3957.png" alt="" class="ezdefi-payment__coin-logo tooltip-show-discount" data-toggle="popover" title="Discount" data-placement="top" data-content="Discount:" data-trigger="hover">
			<span class="ezdefi-payment__coin-name tooltip-show-discount" data-toggle="popover" title="Discount" data-placement="top" data-content="Discount:" data-trigger="hover"></span>
			<span class="wide-space"></span>
			<button class="ezdefi-payment__btn-change-coin">{{ text_change }}</button>
		</div>
		<div class="ezdefi-change-coin-box margin-top-md">
			<div class="ezdefi-select-coin__list">
				{% for coin_config in coins_config %}
					<label for="select-coin-{{ coin_config.ezdefi_coin_id }}" class="ezdefi-change-coin-item">
						<img src="{{ coin_config.logo }}" alt="" class="ezdefi-select-coin-item__logo">
						<span class="ezdefi-select-coin-item__price"> {{ coin_config.price }} </span>
						<span class="ezdefi-select-coin-item__symbol">{{coin_config.symbol}}</span>
						<span class="ezdefi-select-coin-item__discount">-{{coin_config.discount + 0}}%</span>
						<input type="radio" name="coin-selected-to-order" class="hidden select-coin-checkbox" id="select-coin-{{ coin_config.ezdefi_coin_id }}" value="{{ coin_config.ezdefi_coin_id }}" data-discount="{{ coin_config.discount }}">
					</label>
				{% endfor %}
			</div>
            {% if enable_simple_pay %}
                <button class="ezdefi-btn-create-payment btn btn-primary btn-block" data-url_create_payment="{{ url_create_simple_payment }}" disabled> {{ button_next }} </button>
            {% else %}
                <button class="ezdefi-btn-create-payment btn btn-primary btn-block" data-url_create_payment="{{ url_create_escrow_payment }}" disabled> {{ button_next }} </button>
            {% endif %}
		</div>
		<div class="ezdefi-payment__content">
            {% if enable_simple_pay and not enable_escrow_pay %}
                <input type="radio" class="ezdefi-show-payment-radio" id="ezdefi-show-payment--simple" name="show-payment" checked data-suffixes="--simple" checked>
                <label for="ezdefi-show-payment--simple" class="ezdefi-tab btn-show-payment--simple btn-choose-payment-type" data-suffixes="--simple"> {{ text_pay_with_any_wallet }} </label>
                <label class="label-choose-payment"></label>
                <input type="checkbox" class="hidden" id="check-created-payment--simple">
            {% endif %}
            {% if enable_escrow_pay and not enable_simple_pay %}
                <input type="radio" class="ezdefi-show-payment-radio" id="ezdefi-show-payment--escrow" name="show-payment" data-suffixes="--escrow" checked>
                <label for="ezdefi-show-payment--escrow" class="ezdefi-tab btn-show-payment--escrow btn-choose-payment-type" data-suffixes="--escrow">{{ text_pay_with_ezdefi_wallet }}</label>
				<label class="label-choose-payment"></label>
				<input type="checkbox" class="hidden" id="check-created-payment--escrow">
            {% endif %}
            {% if enable_simple_pay and enable_escrow_pay %}
                <input type="radio" class="ezdefi-show-payment-radio" id="ezdefi-show-payment--simple" name="show-payment" checked data-suffixes="--simple">
                <input type="radio" class="ezdefi-show-payment-radio" id="ezdefi-show-payment--escrow" name="show-payment" data-suffixes="--escrow">
                <label for="ezdefi-show-payment--simple" class="ezdefi-tab btn-show-payment--simple btn-choose-payment-type" data-suffixes="--simple"> {{ text_pay_with_any_wallet }} </label>
                <label for="ezdefi-show-payment--escrow" class="ezdefi-tab btn-show-payment--escrow btn-choose-payment-type" data-suffixes="--escrow">{{ text_pay_with_ezdefi_wallet }}</label>
                <input type="checkbox" class="hidden" id="check-created-payment--simple">
                <input type="checkbox" class="hidden" id="check-created-payment--escrow">
            {% endif %}
            {% if enable_simple_pay %}
                <div class="payment-box simple-pay-box">
                    <div class="loader--simple loader">
                        <div class="loader--escrow loader">
                            <div class="Loader__item"></div>
                            <div class="Loader__item"></div>
                            <div class="Loader__item"></div>
                        </div>
                    </div>
                    <div class="payment-content--simple">
                        <div class="alert alert-success alert-copy alert-copy-address">
                            <strong>{{ text_success }}</strong> {{ text_copy_address }}
                        </div>
                        <div class="alert alert-success alert-copy alert-copy-amount">
                            <strong>{{ text_success }}</strong> {{ text_copy_amount }}
                        </div>
                        <div class="ezdefi-payment__value">
                            <span class="ezdefi-payment__origin-value--simple">{{ origin_value }}</span> <span> {{ origin_currency }}</span>
                            <span class="ezdefi-payment__icon-convert"><i class="fa fa-retweet" aria-hidden="true"></i></span>
                            <span class="ezdefi-payment__currency-value--simple"></span><span class="ezdefi-payment__currency--simple"></span>
                        </div>
                        <div class="ezdefi-payment__countdown-box">
                            <input type="hidden" id="payment-id--simple">
                            {{ ezdefi_countdown_lifetime_simple }}
                        </div>
                        <div class="qrcode-box">
                            <a href="" target="_blank" class="ezdefi-payment__deeplink ezdefi-payment__deeplink--simple">
                                <img src="" alt="" class="ezdefi-payment__qr-code--simple">
                            </a>
                            <div class="timeout-notification timeout-notification--simple reload-payment" data-suffixes="--simple">
                                <p>{{ payment_time_out }}</p>
                            </div>
                        </div>
                        <p><b>Address:</b> <span class="ezdefi-payment__wallet-address--simple"></span>
                            <span class="btn-copy-address"><i class="fa fa-copy ezdefi-copy-icon"></i></span>
                        </p>
                        <p><b>Amount:</b> <span class="ezdefi-payment__amount--simple"></span><span class="ezdefi-payment__currency--simple"></span>
                            <span class="btn-copy-amount"><i class="fa fa-copy ezdefi-copy-icon"></i></span>
                        </p>
                        <p class="margin-top-md text-red">{{ text_notify_pay_exact_amount }} <label for="ezdefi-show-payment--escrow" class="link_use_ezdefi_wallet"><i>{{ text_ezdefi_wallet }}</i></label></p>
                    </div>
                    <div class="payment-error--simple">
                        {{ error_cant_create_amount }}
                    </div>
                </div>
            {% endif %}
            {% if enable_escrow_pay %}
                <div class="payment-box escrow-pay-box">
                    <div class="loader--escrow loader">
                        <div class="Loader__item"></div>
                        <div class="Loader__item"></div>
                        <div class="Loader__item"></div>
                    </div>
                    <div class="payment-content--escrow">
                        <div class="ezdefi-payment__value">
                            <span class="ezdefi-payment__origin-value--escrow">{{ origin_value }} </span> <span> {{ origin_currency }}</span>
                            <span class="ezdefi-payment__icon-convert"><i class="fa fa-retweet" aria-hidden="true"></i></span>
                            <span class="ezdefi-payment__currency-value--escrow"></span><span class="ezdefi-payment__currency--escrow"></span>
                        </div>
                        <div class="ezdefi-payment__countdown-box">
                            <input type="hidden" id="payment-id--escrow">
                            {{ ezdefi_countdown_lifetime_escrow }}
                        </div>
                        <div class="qrcode-box">
                            <a href="" class="ezdefi-payment__deeplink" target="_blank">
                                <img src="" alt="" class="ezdefi-payment__qr-code ezdefi-payment__qr-code--escrow">
                            </a>
                            <div class="timeout-notification timeout-notification--escrow reload-payment" data-suffixes="--escrow">
                                <p>{{ payment_time_out }}</p>
                            </div>
                        </div>
                        <div class="ezdefi-payment__download-link">
                            <a href="{{ link_download_app_ios }}" target="_blank"><span><i class="fa fa-apple ezdefi-icon-apple"></i></span> {{ text_download_app_ios }}</a>
                            <a href="{{ link_download_app_android }}" target="_blank"><span><i class="fa fa-android ezdefi-icon-android"></i></span> {{ text_download_app_android }}</a>
                        </div>
                    </div>
                    <div class="payment-error--escrow">
                        {{ error_cant_create_payment }}
                    </div>
                </div>
            {% endif %}
		</div>
	</div>
</div>